import{a4 as e,a5 as a,a6 as l,i as t,r as s,a7 as u,a8 as n,b as i,d as o,t as r,w as d,g as v,a1 as p,f as m,m as c,a2 as f,a3 as y,x as g,M as h,O as _,v as b,K as k,a9 as x,G as w,e as C,s as z,q as S,aa as J,U as D,p as O,J as N,W as q,ab as j,ac as Y,ad as U,N as T,ae as I,L as R,n as V,af as B,I as M,ag as H,ah as L,ai as P,T as E,aj as $,a as G,ak as F,h as K,al as W,am as A}from"./vendor.239c07d9.js";import{C as Q,a as X}from"./index.81aafe26.js";e("data-v-20d0ae14");const Z=w("thead",null,[w("tr",null,[w("th",null,"参数名称"),w("th",null,"参数说明"),w("th",null,"请求类型"),w("th",null,"是否必须"),w("th",null,"数据类型")])],-1),ee={key:0},ae={key:1},le={key:2},te={key:3},se=h("格式化"),ue=h("折叠"),ne=h("缩小"),ie=h("放大"),oe=h("关闭从本地请求用例选择"),re=h("开启从本地请求用例选择"),de=h("发送"),ve=h(" 保存请求用例 "),pe=h("保存请求用例"),me=w("thead",null,[w("tr",null,[w("th",null,"是否启用"),w("th",null,"参数类型"),w("th",null,"参数名称"),w("th",null,"参数值")])],-1),ce={key:0},fe=h("格式化"),ye=h("折叠"),ge=h("缩小"),he=h("放大"),_e=h("等待数据响应中.."),be={style:{display:"flex"}},ke=h("格式化 "),xe=h("折叠 "),we=h("缩小"),Ce=h("放大"),ze={key:0,style:{display:"flex","justify-content":"flex-end","margin-left":"auto"}},Se={style:{"font-size":"16px"}},Je={style:{"font-size":"16px"}};a();const De={setup(e){const a=l();let De=t("g"),Oe=s(!1),Ne=s(""),qe=s(!0),je=s("application/json"),Ye=s([]),Ue=s(""),Te=s("success"),Ie=s([]),Re=s(""),Ve=s([]),Be=e=>G("div",{style:{display:"flex",alignItems:"center"}},[G("div",{style:{marginLeft:"12px",padding:"4px 0"}},[G("div",{style:{"font-size":"16px"}},[e.label]),G(F,{style:{"margin-top":"5px"},size:"small",type:"成功"==e.status?"success":"失败"==e.status?"error":"warning"},{default:()=>e.status})])]),Me=({option:e})=>G("div",{style:{display:"flex",alignItems:"center"}},[G("div",{style:{"font-size":"16px"}},[e.label])]);Ie.value=Q.radioConsts,Ye.value=[{label:"application/json",value:"application/json"},{label:"x-www-form-urlencoded",value:"x-www-form-urlencoded"},{label:"form-data",value:"form-data"}];let He=()=>{const e="lucky_"+sa.value+"_"+na.value;let a=localStorage.getItem(e);if(null!=a){JSON.parse(a).forEach((e=>{let a=Ie.value.find((a=>a.value==e.status));Ve.value.push({time:K().format("YYYY-MM-DD HH:mm:ss"),label:e.title,value:e.title,params:e.param,body:e.body,status:a.label})}))}},Le=s(""),Pe=s(!1),Ee=()=>{Pe.value=!0},$e=()=>{""==Le.value&&a.error("请求用例标题不能为空");const e="lucky_"+sa.value+"_"+na.value;let l=localStorage.getItem(e);if(null!=l){const t=JSON.parse(l);if(-1!=t.findIndex((e=>e.title==Le.value)))return void a.error("该用例名称已被使用,请更改后重试");let s={};s.param=da.value,s.time=K().format("YYYY-MM-DD HH:mm:ss"),s.body=Ne.value,s.title=Le.value,s.status=Te.value,t.push(s),localStorage.setItem(e,JSON.stringify(t))}else{let a=[],l={};l.param=da.value,l.time=K().format("YYYY-MM-DD HH:mm:ss"),l.body=Ne.value,l.title=Le.value,l.status=Te.value,a.push(l),localStorage.setItem(e,JSON.stringify(a))}a.success("保存成功"),Pe.value=!1,He()},Ge=s({});Ge.value=De.value.theme;const Fe=De.value.data,Ke="这似乎不是一个JSON吧 朋友？";let We=()=>{try{Ne.value=JSON.stringify(JSON.parse(Ne.value),null,2)}catch(e){a.warning(Ke)}},Ae=()=>{try{Ne.value=JSON.stringify(JSON.parse(Ne.value),null,0)}catch(e){a.warning(Ke)}},Qe=()=>{try{Ue.value=JSON.stringify(JSON.parse(Ue.value),null,2)}catch(e){}},Xe=()=>{try{Ue.value=JSON.stringify(JSON.parse(Ue.value),null,0)}catch(e){}},Ze=()=>{Ca.value<=12?a.warning("不能再缩小了"):Ca.value=Ca.value-1},ea=()=>{Ca.value>=20?a.warning("不能再放大了"):Ca.value=Ca.value+1},aa=u();n((()=>De.value.theme),(()=>{setTimeout((()=>{qe.vlaue=!1,Ge.value=De.value.theme,qe.vlaue=!0}),160)}));let la=s("doc"),ta=e=>{la.value=e},sa=s(""),ua=s(""),na=s(""),ia=s(""),oa=s(""),ra=s("Params"),da=s([]),va=s(null),pa=s([]),ma=e=>e.name,ca=(e,a)=>-1!=e.name.search("id")||-1!=e.name.search("Id")?"too-old":null,fa=[{title:"字段名",key:"name"},{title:"类型",key:"type",render:e=>""==e.type||null==e.type||null==e.type?"":G(F,{style:{marginRight:"6px"},round:!0,type:"warning"},{default:()=>e.type})},{title:"描述",key:"description"},{title:"是否必须",key:"required",render:e=>G(F,{style:{marginRight:"6px"},round:!0,type:e.required?"error":"info"},{default:()=>e.required?"True":"False"})},{title:"快速复制字段名",key:"actions",render:e=>G(O,{size:"small",round:!0,type:"success",quaternary:!0,onClick:()=>ya(e)},{default:()=>"Copy"})}],ya=e=>{const l=document.createElement("input");l.value=e.name,document.body.appendChild(l),l.select(),document.execCommand("Copy"),document.body.removeChild(l),a.success("已复制")},ga=(e,a,l,t)=>Q.deep(e,a,l,Fe),ha=e=>{ra.value=e},_a=s(!1),ba=()=>{ra.value="ResponseBody",_a.value=!0;let e={"Content-Type":je.value},a={};if(da.value.forEach((l=>{l.active&&("header"==l.in?e[l.name]=l.value:"query"==l.in&&(a[l.name]=l.value))})),"get"==na.value.toLowerCase()){X({url:ua.value,method:na.value.toLowerCase(),data:a,config:{headers:e}}).then((e=>{oa.value=new Date-e.config.startTime,ia.value=e.status,Ue.value=JSON.stringify(e.data),Qe(),_a.value=!1})).catch((e=>{ia.value=e.response.status,oa.value=new Date-e.response.config.startTime,Ue.value=xa(e.response),Qe(),_a.value=!1}))}else{X({url:ua.value,method:na.value.toLowerCase(),data:Ne.value,config:{headers:e,params:a}}).then((e=>{Ue.value=JSON.stringify(e.data),ia.value=e.status,oa.value=new Date-e.config.startTime,Qe(),_a.value=!1})).catch((e=>{ia.value=e.response.status,oa.value=new Date-e.response.config.startTime,Ue.value=xa(e.response),Qe(),_a.value=!1}))}},ka=(e,l)=>{da.value=l.params,Ne.value=l.body,a.success("参数已经覆盖")},xa=e=>{let a={};return a.timestamp=K().format("YYYY-MM-DD HH:mm:ss"),a.code=e.data.status,a.error=e.data.error,a.path=e.data.path,JSON.stringify(a)},wa=!1,Ca=s(12),za=s(""),Sa=s([]),Ja=s([]);return n((()=>aa.params),(()=>{const e=aa.params.data;if(Ve.value=[],sessionStorage.removeItem(sa.value+na.value.toLowerCase()),""!=sa.value&&"/firstPage"!=aa.path){let e={};e.editJson=Ne.value,e.reqBody=va.value,e.reqParams=da.value,e.isBody=Oe.value,e.tabValue=la.value,e.responseJson=Ue.value,e.rescode=ia.value,e.restime=oa.value,e.openSelect=Re.value,e.switchResponse=ra.value,e.radio=je.value,e.responseTreeData=Sa.value,e.bodyTreeData=Ja.value,e.jsonData=za.value,sessionStorage.setItem(ua.value+na.value.toLowerCase(),JSON.stringify(e))}if(null!=e&&"identity"!=e){const a=JSON.parse(e);sa.value=a.summary,ua.value=a.url,na.value=a.method.toUpperCase(),Sa.value=[],Ja.value=[];let l=sessionStorage.getItem(a.url+a.method);if(null!=l){let e=JSON.parse(l);return Ne.value=e.editJson,va.value=e.reqBody,da.value=e.reqParams,Oe.value=e.isBody,la.value=e.tabValue,Ue.value=e.responseJson,ia.value=e.rescode,oa.value=e.restime,Re.value=e.openSelect,ra.value=e.switchResponse,je.value=e.radio,Sa.value=e.responseTreeData,za.value=e.jsonData,void(Ja.value=e.bodyTreeData)}da.value=[];for(let e in a.parameters)"body"!=a.parameters[e].in?(a.parameters[e].active=!0,a.parameters[e].value=s(""),da.value.push(a.parameters[e])):va.vlaue=a.parameters[e];if("GET"==na.value)Oe.value=!1;else{Oe.value=!0;let e=va.vlaue.schema.$ref,a=Fe.definitions[e.replace("#/definitions/","")],l=Object.keys(a.properties),t={};l.forEach((e=>{a.properties[e].key=e,t[e]=ga(a.properties[e],e,Ja.value)})),Ne.value=JSON.stringify(t)}let t=a.responses[200].schema,u={};if(null!=t){if("items"in t&&"$ref"in t.items)u=Fe.definitions[t.items.$ref.replace("#/definitions/","")];else if("$ref"in t&&null!=t.$ref)u=Fe.definitions[t.$ref.replace("#/definitions/","")];else if("items"in t){let e={};e[""]={type:t.items.type,description:t.items.type,key:""},u.properties=e}else u=t;pa.value=u.properties;let e=Object.keys(u.properties),a={};e.forEach((e=>{u.properties[e].key=e,a[e]=ga(u.properties[e],e,Sa.value)})),za.value=a,""!=Ne.value&&We(),He()}}}),{immediate:!0}),(e,a)=>{const l=i("b-ace-editor"),t=i("json-viewer");return o(),r(v(p),{style:{margin:"10px"},key:(new Date).getTime()},{default:d((()=>[m(v(c),{"default-value":"doc",size:"large",value:v(la),"on-update:value":v(ta)},{default:d((()=>[m(v(b),{name:"doc",tab:"文档"},{default:d((()=>[m(v(p),{title:"Documentation",style:{margin:"10px"}},{default:d((()=>[m(v(f),{"x-gap":50,"y-gap":10,cols:3},{default:d((()=>[m(v(y),null,{default:d((()=>[m(v(p),{title:"接口地址",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(_(v(ua)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"请求方式",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(_(v(na)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"接口描述",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(_(v(sa)),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(v(p),{style:{margin:"10px"}},{default:d((()=>[m(v(c),{"default-value":"request"},{default:d((()=>[m(v(b),{name:"request",tab:"请求参数"},{default:d((()=>[m(v(k),{vertical:"",size:12},{default:d((()=>[m(v(p),null,{default:d((()=>[m(v(x),{"single-line":!1},{default:d((()=>[Z,w("tbody",null,[(o(!0),C(S,null,z(v(da),(e=>(o(),C("tr",{key:e.name},[w("td",null,_(e.name),1),w("td",null,_(e.description),1),"header"==e.in?(o(),C("td",ee,[m(v(F),{type:"success",size:"medium",round:""},{default:d((()=>[h(_(e.in),1)])),_:2},1024)])):(o(),C("td",ae,[m(v(F),{type:"info",size:"medium",round:""},{default:d((()=>[h(_(e.in),1)])),_:2},1024)])),e.required?(o(),C("td",le,[m(v(F),{type:"error",size:"medium",round:""},{default:d((()=>[h(_(e.required),1)])),_:2},1024)])):(o(),C("td",te,[m(v(F),{type:"info",size:"medium",round:""},{default:d((()=>[h(_(e.required),1)])),_:2},1024)])),w("td",null,_(e.type),1)])))),128))])])),_:1})])),_:1}),v(Oe)&&v(qe)?(o(),r(v(p),{key:0,title:"RequestBody"},{default:d((()=>[m(v(J),{ref:(e,a)=>{a.table=e},columns:v(fa),data:v(Ja),"row-key":v(ma),"row-class-name":v(ca)},null,8,["columns","data","row-key","row-class-name"])])),_:1})):D("",!0),v(Oe)&&v(qe)?(o(),r(v(p),{key:1},{default:d((()=>[m(v(O),{type:"success",style:{"margin-bottom":"10px"},onClick:v(We),size:"small"},{default:d((()=>[se])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ae),size:"small"},{default:d((()=>[ue])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[ne])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(ea),size:"small"},{default:d((()=>[ie])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Ne),"onUpdate:modelValue":a[0]||(a[0]=e=>N(Ne)?Ne.value=e:Ne=e),lang:"json",width:"100%",height:"600",theme:0==v(Ge)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])),_:1})):D("",!0)])),_:1})])),_:1}),m(v(b),{name:"signup",tab:"返回值"},{default:d((()=>[m(v(J),{ref:(e,a)=>{a.table=e},columns:v(fa),data:v(Sa),"row-key":v(ma),"row-class-name":v(ca)},null,8,["columns","data","row-key","row-class-name"])])),_:1}),m(v(b),{name:"show",tab:"返回值示例"},{default:d((()=>[m(t,{theme:v(q),value:v(za),style:{"font-size":"16px"},copyable:"","expand-depth":"2"},null,8,["theme","value"])])),_:1})])),_:1})])),_:1})])),_:1}),m(v(b),{name:"run",tab:"运行"},{default:d((()=>[m(v(p),{title:"Send Request",size:"large"},{default:d((()=>[m(v(k),{vertical:"",size:22},{default:d((()=>[m(v(j),{value:v(Re),"onUpdate:value":a[1]||(a[1]=e=>N(Re)?Re.value=e:Re=e)},{checked:d((()=>[oe])),unchecked:d((()=>[re])),_:1},8,["value"]),m(v(Y),{size:"large"},{default:d((()=>[m(v(U),null,{default:d((()=>[m(v(T),{type:"success"},{default:d((()=>[h(_(v(na)),1)])),_:1})])),_:1}),m(v(I),{disabled:!0,style:{width:"50%"},value:v(ua),"onUpdate:value":a[2]||(a[2]=e=>N(ua)?ua.value=e:ua=e)},null,8,["value"]),m(v(O),{onClick:v(ba),type:"success",ghost:""},{default:d((()=>[de])),_:1},8,["onClick"]),m(v(R),{trigger:"hover"},{trigger:d((()=>[m(v(O),{round:"",style:{"font-size":"26px"},onClick:v(Ee)},{default:d((()=>[m(v(V),null,{default:d((()=>[m(v(B))])),_:1})])),_:1},8,["onClick"])])),default:d((()=>[ve])),_:1})])),_:1}),v(Re)?(o(),r(v(M),{key:0,options:v(Ve),"render-label":v(Be),"render-tag":v(Me),"on-update:value":v(ka),placeholder:"选择一个请求用例,覆盖当前的参数.",style:{width:"50%"}},null,8,["options","render-label","render-tag","on-update:value"])):D("",!0),m(v(H),{show:v(Pe),"onUpdate:show":a[5]||(a[5]=e=>N(Pe)?Pe.value=e:Pe=e),width:502},{default:d((()=>[m(v(L),{title:"保存请求用例",closable:""},{footer:d((()=>[m(v(O),{size:"large",onClick:v($e)},{default:d((()=>[pe])),_:1},8,["onClick"])])),default:d((()=>[m(v(k),{vertical:""},{default:d((()=>[m(v(p),{title:"起一个名字吧"},{default:d((()=>[m(v(I),{size:"large",placeholder:"写点什么..",value:v(Le),"onUpdate:value":a[3]||(a[3]=e=>N(Le)?Le.value=e:Le=e)},null,8,["value"])])),_:1}),m(v(p),{title:"选一种状态吧"},{default:d((()=>[m(v(P),{value:v(Te),"onUpdate:value":a[4]||(a[4]=e=>N(Te)?Te.value=e:Te=e),name:"statusGroup",size:"large"},{default:d((()=>[(o(!0),C(S,null,z(v(Ie),(e=>(o(),r(v(W),{key:e.value,value:e.value},{default:d((()=>[m(v(k),{justify:"space-around",size:"large"},{default:d((()=>[h(_(e.label),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),m(v(P),{value:v(je),"onUpdate:value":a[6]||(a[6]=e=>N(je)?je.value=e:je=e),name:"radiobuttongroup1"},{default:d((()=>[(o(!0),C(S,null,z(v(Ye),(e=>(o(),r(v(A),{key:e.value,value:e.value},{default:d((()=>[h(_(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"]),m(v(c),{"default-value":"Params",value:v(ra),"on-update:value":v(ha)},{default:d((()=>[m(v(b),{name:"Params",tab:"Params"},{default:d((()=>[m(v(x),{bordered:!1,"single-line":!1},{default:d((()=>[me,w("tbody",null,[(o(!0),C(S,null,z(v(da),(e=>(o(),C("tr",{key:e.name},[w("td",null,[m(v(j),{value:e.active,"onUpdate:value":a=>e.active=a},null,8,["value","onUpdate:value"])]),w("td",null,[m(v(F),{type:"success"},{default:d((()=>[h(_(e.type)+"("+_(e.in)+")",1)])),_:2},1024)]),w("td",null,[m(v(F),{type:"info"},{default:d((()=>[h(_(e.name),1)])),_:2},1024)]),w("td",null,[m(v(I),{value:e.value,"onUpdate:value":a=>e.value=a,type:"text",size:"medium",placeholder:"请填写"+e.name,disabled:!e.active,round:"",clearable:""},null,8,["value","onUpdate:value","placeholder","disabled"])])])))),128))])])),_:1})])),_:1}),m(v(b),{name:"RequestBody",tab:"RequestBody"},{default:d((()=>[v(qe)?(o(),C("div",ce,[m(v(O),{type:"success",style:{"margin-bottom":"10px"},onClick:v(We),size:"small"},{default:d((()=>[fe])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ae),size:"small"},{default:d((()=>[ye])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[ge])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(ea),size:"small"},{default:d((()=>[he])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Ne),"onUpdate:modelValue":a[7]||(a[7]=e=>N(Ne)?Ne.value=e:Ne=e),lang:"json",width:"100%",height:"600",theme:0==v(Ge)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])):D("",!0)])),_:1}),m(v(b),{name:"ResponseBody",tab:"ResponseBody"},{default:d((()=>[m(v(p),{title:"Response"},{default:d((()=>[m(v(E),{show:v(_a)},{description:d((()=>[_e])),default:d((()=>[w("div",be,[m(v(O),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[ke])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Xe),size:"small"},{default:d((()=>[xe])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[we])),_:1},8,["onClick"]),m(v(O),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(ea),size:"small"},{default:d((()=>[Ce])),_:1},8,["onClick"]),""!=v(ia)?(o(),C("span",ze,[w("span",Se,"状态码: "+_(v(ia)),1),m(v($),{vertical:""}),w("span",Je,"耗时: "+_(v(oa))+"ms ",1)])):D("",!0)]),m(l,{style:{"border-style":"none"},modelValue:v(Ue),"onUpdate:modelValue":a[8]||(a[8]=e=>N(Ue)?Ue.value=e:Ue=e),lang:"json",width:"100%",height:"600",theme:0==v(Ge)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])),_:1},8,["show"])])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})}},__scopeId:"data-v-20d0ae14"};export{De as default};
