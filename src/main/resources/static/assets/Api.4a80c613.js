import{a2 as e,a3 as a,a4 as l,i as t,r as s,a5 as u,a6 as n,a as i,b as o,s as r,w as d,f as v,$ as p,e as m,l as c,a0 as f,a1 as y,v as g,L as h,M as b,t as _,J as k,a7 as x,E as w,d as C,q as z,p as S,n as J,I as D,S as O,a8 as N,U as Y,a9 as j,aa as q,ab as U,N as I,ac as $,K as M,m as R,ad as V,G as B,ae as H,af as T,ag as L,Q as E,ah as P,h as G,ai as K,aj as Q,ak as A,al as F}from"./vendor.9b7543cb.js";import{a as W}from"./index.98916f69.js";e("data-v-259a4f9e");const X=w("thead",null,[w("tr",null,[w("th",null,"参数名称"),w("th",null,"参数说明"),w("th",null,"请求类型"),w("th",null,"是否必须"),w("th",null,"数据类型")])],-1),Z={key:0},ee={key:1},ae={key:2},le={key:3},te=h("格式化"),se=h("折叠"),ue=h("缩小"),ne=h("放大"),ie=h("关闭从本地请求用例选择"),oe=h("开启从本地请求用例选择"),re=h("发送"),de=h(" 保存请求用例 "),ve=h("保存请求用例"),pe=w("thead",null,[w("tr",null,[w("th",null,"是否启用"),w("th",null,"参数类型"),w("th",null,"参数名称"),w("th",null,"参数值")])],-1),me={key:0},ce=h("格式化"),fe=h("折叠"),ye=h("缩小"),ge=h("放大"),he=h("等待数据响应中.."),be={style:{display:"flex"}},_e=h("格式化 "),ke=h("折叠 "),xe=h("缩小"),we=h("放大"),Ce={key:0,style:{display:"flex","justify-content":"flex-end","margin-left":"auto"}},ze={style:{"font-size":"16px"}},Se={style:{"font-size":"16px"}};a();const Je={setup(e){const a=l();let Je=t("g"),De=s(!1),Oe=s(""),Ne=s(!0),Ye=s("application/json"),je=s([]),qe=s(""),Ue=s("success"),Ie=s([]),$e=s(""),Me=s([]),Re=e=>G("div",{style:{display:"flex",alignItems:"center"}},[G("div",{style:{marginLeft:"12px",padding:"4px 0"}},[G("div",{style:{"font-size":"16px"}},[e.label]),G(K,{style:{"margin-top":"5px"},size:"small",type:"成功"==e.status?"success":"失败"==e.status?"error":"warning"},{default:()=>e.status})])]),Ve=({option:e})=>G("div",{style:{display:"flex",alignItems:"center"}},[G("div",{style:{"font-size":"16px"}},[e.label])]);Ie.value=[{value:"success",label:"成功"},{value:"error",label:"失败"},{value:"error-retry",label:"失败待重试"},{value:"retry",label:"待重试"},{value:"no-auth",label:"无权限"},{value:"no-data",label:"无响应数据"},{value:"no-some-data",label:"响应缺少部分数据"},{value:"big-some-data",label:"返回了多余数据"},{value:"no-format",label:"响应参数未驼峰命名"},{value:"type-error",label:"参数类型错误"}],je.value=[{label:"application/json",value:"application/json"},{label:"x-www-form-urlencoded",value:"x-www-form-urlencoded"},{label:"form-data",value:"form-data"}];let Be=()=>{const e="lucky_"+ta.value+"_"+ua.value;let a=localStorage.getItem(e);if(null!=a){JSON.parse(a).forEach((e=>{let a=Ie.value.find((a=>a.value==e.status));Me.value.push({time:Q().format("YYYY-MM-DD HH:mm:ss"),label:e.title,value:e.title,params:e.param,body:e.body,status:a.label})}))}},He=s(""),Te=s(!1),Le=()=>{Te.value=!0},Ee=()=>{""==He.value&&a.error("请求用例标题不能为空");const e="lucky_"+ta.value+"_"+ua.value;let l=localStorage.getItem(e);if(null!=l){const t=JSON.parse(l);if(-1!=t.findIndex((e=>e.title==He.value)))return void a.error("该用例名称已被使用,请更改后重试");let s={};s.param=ra.value,s.time=Q().format("YYYY-MM-DD HH:mm:ss"),s.body=Oe.value,s.title=He.value,s.status=Ue.value,t.push(s),localStorage.setItem(e,JSON.stringify(t))}else{let a=[],l={};l.param=ra.value,l.time=Q().format("YYYY-MM-DD HH:mm:ss"),l.body=Oe.value,l.title=He.value,l.status=Ue.value,a.push(l),localStorage.setItem(e,JSON.stringify(a))}a.success("保存成功"),Te.value=!1,Be()},Pe=s({});Pe.value=Je.value.theme;let Ge=Je.value.data;const Ke="这似乎不是一个JSON吧 朋友？";let Qe=()=>{try{Oe.value=JSON.stringify(JSON.parse(Oe.value),null,2)}catch(e){a.warning(Ke)}},Ae=()=>{try{Oe.value=JSON.stringify(JSON.parse(Oe.value),null,0)}catch(e){a.warning(Ke)}},Fe=()=>{try{qe.value=JSON.stringify(JSON.parse(qe.value),null,2)}catch(e){}},We=()=>{try{qe.value=JSON.stringify(JSON.parse(qe.value),null,0)}catch(e){}},Xe=()=>{Ca.value<=12?a.warning("不能再缩小了"):Ca.value=Ca.value-1},Ze=()=>{Ca.value>=20?a.warning("不能再放大了"):Ca.value=Ca.value+1},ea=u();n((()=>Je.value.theme),(()=>{setTimeout((()=>{Ne.vlaue=!1,Pe.value=Je.value.theme,Ne.vlaue=!0}),160)}));let aa=s("doc"),la=e=>{aa.value=e},ta=s(""),sa=s(""),ua=s(""),na=s(""),ia=s(""),oa=s("Params"),ra=s([]),da=s(null),va=s([]),pa=e=>e.name,ma=(e,a)=>-1!=e.name.search("id")||-1!=e.name.search("Id")?"too-old":null,ca=[{title:"字段名",key:"name"},{title:"类型",key:"type",render:e=>""==e.type||null==e.type||null==e.type?"":G(K,{style:{marginRight:"6px"},round:!0,type:"warning"},{default:()=>e.type})},{title:"描述",key:"description"},{title:"快速复制字段名",key:"actions",render:e=>G(J,{size:"small",round:!0,type:"success",quaternary:!0,onClick:()=>fa(e)},{default:()=>"Copy"})}],fa=e=>{const l=document.createElement("input");l.value=e.name,document.body.appendChild(l),l.select(),document.execCommand("Copy"),document.body.removeChild(l),a.success("已复制")},ya=(e,a,l)=>{if("$ref"in e||"items"in e&&"$ref"in e.items){let t="";t="$ref"in e?e.$ref.replace("#/definitions/",""):e.items.$ref.replace("#/definitions/","");let s=Ge.definitions[t];if(null==s)return{};let u=s.properties,n={},i=Object.keys(u);if(null!=l){let t=[],s={name:a,type:e.type,description:e.description,children:t};for(let e in i)n[i[e]]=ya(u[i[e]],i[e],t);l.push(s)}else for(let e in i)n[i[e]]=ya(u[i[e]],i[e],void 0);return n}{let t=ha(e.type);return null!=l&&l.push({name:a,type:e.type,description:e.description}),t}},ga=e=>{oa.value=e},ha=e=>{switch(e.toLowerCase()){case"array":return[];case"integer":case"number":return 0;case"string":return"";case"object":return{};case"string(date-time)":return Q().format("YYYY-MM-DD HH:mm:ss");default:return""}},ba=s(!1),_a=()=>{oa.value="ResponseBody",ba.value=!0;let e={"Content-Type":Ye.value},a={};if(ra.value.forEach((l=>{l.active&&("header"==l.in?e[l.name]=l.value:"query"==l.in&&(a[l.name]=l.value))})),"get"==ua.value.toLowerCase()){W({url:sa.value,method:ua.value.toLowerCase(),data:a,config:{headers:e}}).then((e=>{ia.value=new Date-e.config.startTime,na.value=e.status,qe.value=JSON.stringify(e.data),Fe(),ba.value=!1})).catch((e=>{na.value=e.response.status,ia.value=new Date-e.response.config.startTime,qe.value=xa(e.response),Fe(),ba.value=!1}))}else{W({url:sa.value,method:ua.value.toLowerCase(),data:Oe.value,config:{headers:e,params:a}}).then((e=>{qe.value=JSON.stringify(e.data),na.value=e.status,ia.value=new Date-e.config.startTime,Fe(),ba.value=!1})).catch((e=>{na.value=e.response.status,ia.value=new Date-e.response.config.startTime,qe.value=xa(e.response),Fe(),ba.value=!1}))}},ka=(e,l)=>{ra.value=l.params,Oe.value=l.body,a.success("参数已经覆盖")},xa=e=>{let a={};return a.timestamp=Q().format("YYYY-MM-DD HH:mm:ss"),a.code=e.data.status,a.error=e.data.error,a.path=e.data.path,JSON.stringify(a)},wa=!1,Ca=s(12),za=s(""),Sa=s([]);return n((()=>ea.params),(()=>{const e=ea.params.data;if(Me.value=[],sessionStorage.removeItem(ta.value+ua.value.toLowerCase()),""!=ta.value&&"/firstPage"!=ea.path){let e={};e.editJson=Oe.value,e.reqBody=da.value,e.reqParams=ra.value,e.isBody=De.value,e.tabValue=aa.value,e.responseJson=qe.value,e.rescode=na.value,e.restime=ia.value,e.openSelect=$e.value,e.switchResponse=oa.value,e.radio=Ye.value,e.responseTreeData=Sa.value,e.jsonData=za.value,sessionStorage.setItem(sa.value+ua.value.toLowerCase(),JSON.stringify(e))}if(null!=e&&"identity"!=e){const a=JSON.parse(e);ta.value=a.summary,sa.value=a.url,ua.value=a.method.toUpperCase(),Sa.value=[];let l=sessionStorage.getItem(a.url+a.method);if(null!=l){let e=JSON.parse(l);return Oe.value=e.editJson,da.value=e.reqBody,ra.value=e.reqParams,De.value=e.isBody,aa.value=e.tabValue,qe.value=e.responseJson,na.value=e.rescode,ia.value=e.restime,$e.value=e.openSelect,oa.value=e.switchResponse,Ye.value=e.radio,Sa.value=e.responseTreeData,void(za.value=e.jsonData)}ra.value=[];for(let e in a.parameters)"body"!=a.parameters[e].in?(a.parameters[e].active=!0,a.parameters[e].value=s(""),ra.value.push(a.parameters[e])):da.vlaue=a.parameters[e];if("GET"==ua.value)De.value=!1;else{De.value=!0;let e=da.vlaue.schema.$ref,a=Ge.definitions[e.replace("#/definitions/","")],l=Object.keys(a.properties),t={};l.forEach((e=>{a.properties[e].key=e,t[e]=ya(a.properties[e],void 0,void 0)})),Oe.value=JSON.stringify(t)}let t=a.responses[200].schema,u={};if(null!=t){if("items"in t&&"$ref"in t.items)u=Ge.definitions[t.items.$ref.replace("#/definitions/","")];else if("$ref"in t&&null!=t.$ref)u=Ge.definitions[t.$ref.replace("#/definitions/","")];else if("items"in t){let e={};e[""]={type:t.items.type,description:t.items.type,key:""},u.properties=e}else u=t;va.value=u.properties;let e=Object.keys(u.properties),a={};e.forEach((e=>{u.properties[e].key=e,a[e]=ya(u.properties[e],e,Sa.value)})),za.value=a,""!=Oe.value&&Qe(),Be()}}}),{immediate:!0}),(e,a)=>{const l=i("b-ace-editor"),t=i("json-viewer");return o(),r(v(p),{style:{margin:"10px"},key:(new Date).getTime()},{default:d((()=>[m(v(c),{"default-value":"doc",size:"large",value:v(aa),"on-update:value":v(la)},{default:d((()=>[m(v(_),{name:"doc",tab:"文档"},{default:d((()=>[m(v(p),{title:"Documentation",style:{margin:"10px"}},{default:d((()=>[m(v(f),{"x-gap":50,"y-gap":10,cols:3},{default:d((()=>[m(v(y),null,{default:d((()=>[m(v(p),{title:"接口地址",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(sa)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"请求方式",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(ua)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"接口描述",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(ta)),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(v(p),{style:{margin:"10px"}},{default:d((()=>[m(v(c),{"default-value":"request"},{default:d((()=>[m(v(_),{name:"request",tab:"请求参数"},{default:d((()=>[m(v(k),{vertical:"",size:12},{default:d((()=>[m(v(p),null,{default:d((()=>[m(v(x),{"single-line":!1},{default:d((()=>[X,w("tbody",null,[(o(!0),C(S,null,z(v(ra),(e=>(o(),C("tr",null,[w("td",null,b(e.name),1),w("td",null,b(e.description),1),"header"==e.in?(o(),C("td",Z,[m(v(K),{type:"success",size:"medium",round:""},{default:d((()=>[h(b(e.in),1)])),_:2},1024)])):(o(),C("td",ee,[m(v(K),{type:"info",size:"medium",round:""},{default:d((()=>[h(b(e.in),1)])),_:2},1024)])),e.required?(o(),C("td",ae,[m(v(K),{type:"error",size:"medium",round:""},{default:d((()=>[h(b(e.required),1)])),_:2},1024)])):(o(),C("td",le,[m(v(K),{type:"info",size:"medium",round:""},{default:d((()=>[h(b(e.required),1)])),_:2},1024)])),w("td",null,b(e.type),1)])))),256))])])),_:1})])),_:1}),v(De)&&v(Ne)?(o(),r(v(p),{key:0,title:"RequestBody"},{default:d((()=>[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[te])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ae),size:"small"},{default:d((()=>[se])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Xe),size:"small"},{default:d((()=>[ue])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[ne])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Oe),"onUpdate:modelValue":a[0]||(a[0]=e=>D(Oe)?Oe.value=e:Oe=e),lang:"json",width:"100%",height:"600",theme:0==v(Pe)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])),_:1})):O("",!0)])),_:1})])),_:1}),m(v(_),{name:"signup",tab:"返回值"},{default:d((()=>[m(v(N),{ref:(e,a)=>{a.table=e},columns:v(ca),data:v(Sa),"row-key":v(pa),"row-class-name":v(ma)},null,8,["columns","data","row-key","row-class-name"])])),_:1}),m(v(_),{name:"show",tab:"返回值示例"},{default:d((()=>[m(t,{theme:v(Y),value:v(za),style:{"font-size":"16px"},copyable:"","expand-depth":"2"},null,8,["theme","value"])])),_:1})])),_:1})])),_:1})])),_:1}),m(v(_),{name:"run",tab:"运行"},{default:d((()=>[m(v(p),{title:"Send Request",size:"large"},{default:d((()=>[m(v(k),{vertical:"",size:22},{default:d((()=>[m(v(j),{value:v($e),"onUpdate:value":a[1]||(a[1]=e=>D($e)?$e.value=e:$e=e)},{checked:d((()=>[ie])),unchecked:d((()=>[oe])),_:1},8,["value"]),m(v(q),{size:"large"},{default:d((()=>[m(v(U),null,{default:d((()=>[m(v(I),{type:"success"},{default:d((()=>[h(b(v(ua)),1)])),_:1})])),_:1}),m(v($),{disabled:!0,style:{width:"50%"},value:v(sa),"onUpdate:value":a[2]||(a[2]=e=>D(sa)?sa.value=e:sa=e)},null,8,["value"]),m(v(J),{onClick:v(_a),type:"success",ghost:""},{default:d((()=>[re])),_:1},8,["onClick"]),m(v(M),{trigger:"hover"},{trigger:d((()=>[m(v(J),{round:"",style:{"font-size":"26px"},onClick:v(Le)},{default:d((()=>[m(v(R),null,{default:d((()=>[m(v(V))])),_:1})])),_:1},8,["onClick"])])),default:d((()=>[de])),_:1})])),_:1}),v($e)?(o(),r(v(B),{key:0,options:v(Me),"render-label":v(Re),"render-tag":v(Ve),"on-update:value":v(ka),placeholder:"选择一个请求用例,覆盖当前的参数.",style:{width:"50%"}},null,8,["options","render-label","render-tag","on-update:value"])):O("",!0),m(v(H),{show:v(Te),"onUpdate:show":a[5]||(a[5]=e=>D(Te)?Te.value=e:Te=e),width:502},{default:d((()=>[m(v(T),{title:"保存请求用例",closable:""},{footer:d((()=>[m(v(J),{size:"large",onClick:v(Ee)},{default:d((()=>[ve])),_:1},8,["onClick"])])),default:d((()=>[m(v(k),{vertical:""},{default:d((()=>[m(v(p),{title:"起一个名字吧"},{default:d((()=>[m(v($),{size:"large",placeholder:"写点什么..",value:v(He),"onUpdate:value":a[3]||(a[3]=e=>D(He)?He.value=e:He=e)},null,8,["value"])])),_:1}),m(v(p),{title:"选一种状态吧"},{default:d((()=>[m(v(L),{value:v(Ue),"onUpdate:value":a[4]||(a[4]=e=>D(Ue)?Ue.value=e:Ue=e),name:"statusGroup",size:"large"},{default:d((()=>[(o(!0),C(S,null,z(v(Ie),(e=>(o(),r(v(A),{key:e.value,value:e.value},{default:d((()=>[m(v(k),{justify:"space-around",size:"large"},{default:d((()=>[h(b(e.label),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),m(v(L),{value:v(Ye),"onUpdate:value":a[6]||(a[6]=e=>D(Ye)?Ye.value=e:Ye=e),name:"radiobuttongroup1"},{default:d((()=>[(o(!0),C(S,null,z(v(je),(e=>(o(),r(v(F),{key:e.value,value:e.value},{default:d((()=>[h(b(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"]),m(v(c),{"default-value":"Params",value:v(oa),"on-update:value":v(ga)},{default:d((()=>[m(v(_),{name:"Params",tab:"Params"},{default:d((()=>[m(v(x),{bordered:!1,"single-line":!1},{default:d((()=>[pe,w("tbody",null,[(o(!0),C(S,null,z(v(ra),(e=>(o(),C("tr",null,[w("td",null,[m(v(j),{value:e.active,"onUpdate:value":a=>e.active=a},null,8,["value","onUpdate:value"])]),w("td",null,[m(v(K),{type:"success"},{default:d((()=>[h(b(e.type)+"("+b(e.in)+")",1)])),_:2},1024)]),w("td",null,[m(v(K),{type:"info"},{default:d((()=>[h(b(e.name),1)])),_:2},1024)]),w("td",null,[m(v($),{value:e.value,"onUpdate:value":a=>e.value=a,type:"text",size:"medium",placeholder:"请填写"+e.name,disabled:!e.active,round:"",clearable:""},null,8,["value","onUpdate:value","placeholder","disabled"])])])))),256))])])),_:1})])),_:1}),m(v(_),{name:"RequestBody",tab:"RequestBody"},{default:d((()=>[v(Ne)?(o(),C("div",me,[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[ce])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ae),size:"small"},{default:d((()=>[fe])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Xe),size:"small"},{default:d((()=>[ye])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[ge])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Oe),"onUpdate:modelValue":a[7]||(a[7]=e=>D(Oe)?Oe.value=e:Oe=e),lang:"json",width:"100%",height:"600",theme:0==v(Pe)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])):O("",!0)])),_:1}),m(v(_),{name:"ResponseBody",tab:"ResponseBody"},{default:d((()=>[m(v(p),{title:"Response"},{default:d((()=>[m(v(E),{show:v(ba)},{description:d((()=>[he])),default:d((()=>[w("div",be,[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Fe),size:"small"},{default:d((()=>[_e])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(We),size:"small"},{default:d((()=>[ke])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Xe),size:"small"},{default:d((()=>[xe])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ze),size:"small"},{default:d((()=>[we])),_:1},8,["onClick"]),""!=v(na)?(o(),C("span",Ce,[w("span",ze,"状态码: "+b(v(na)),1),m(v(P),{vertical:""}),w("span",Se,"耗时: "+b(v(ia))+"ms ",1)])):O("",!0)]),m(l,{style:{"border-style":"none"},modelValue:v(qe),"onUpdate:modelValue":a[8]||(a[8]=e=>D(qe)?qe.value=e:qe=e),lang:"json",width:"100%",height:"600",theme:0==v(Pe)?"vibrant_ink":"github",readonly:v(wa),"font-size":v(Ca)},null,8,["modelValue","theme","readonly","font-size"])])),_:1},8,["show"])])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})}},__scopeId:"data-v-259a4f9e"};export{Je as default};
