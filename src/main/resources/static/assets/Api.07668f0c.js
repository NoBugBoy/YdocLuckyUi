import{a2 as e,a3 as a,a4 as l,i as t,r as s,a5 as u,a6 as n,a as i,b as r,s as o,w as d,f as v,$ as p,e as m,l as c,a0 as f,a1 as y,v as g,L as h,M as b,t as _,J as k,a7 as x,E as C,d as w,q as z,p as S,n as J,I as O,S as D,a8 as N,U as Y,a9 as j,aa as q,ab as U,N as I,ac as $,K as M,m as R,ad as V,G as B,ae as H,af as T,ag as L,ah as E,h as P,ai as G,aj as K,ak as A,al as F}from"./vendor.8db37885.js";import{a as Q}from"./index.27541e6b.js";e("data-v-2346bda6");const W=C("thead",null,[C("tr",null,[C("th",null,"参数名称"),C("th",null,"参数说明"),C("th",null,"请求类型"),C("th",null,"是否必须"),C("th",null,"数据类型")])],-1),X={key:0},Z={key:1},ee={key:2},ae={key:3},le=h("格式化"),te=h("折叠"),se=h("缩小"),ue=h("放大"),ne=h("关闭从本地请求用例选择"),ie=h("开启从本地请求用例选择"),re=h("发送"),oe=h(" 保存请求用例 "),de=h("保存请求用例"),ve=C("thead",null,[C("tr",null,[C("th",null,"是否启用"),C("th",null,"参数类型"),C("th",null,"参数名称"),C("th",null,"参数值")])],-1),pe={key:0},me=h("格式化"),ce=h("折叠"),fe=h("缩小"),ye=h("放大"),ge={style:{display:"flex"}},he=h("格式化 "),be=h("折叠 "),_e=h("缩小"),ke=h("放大"),xe={key:0,style:{display:"flex","justify-content":"flex-end","margin-left":"auto"}},Ce={style:{"font-size":"16px"}},we={style:{"font-size":"16px"}};a();const ze={setup(e){const a=l();let ze=t("g"),Se=s(!1),Je=s(""),Oe=s(!0),De=s("application/json"),Ne=s([]),Ye=s(""),je=s("success"),qe=s([]),Ue=s(""),Ie=s([]),$e=e=>P("div",{style:{display:"flex",alignItems:"center"}},[P("div",{style:{marginLeft:"12px",padding:"4px 0"}},[P("div",{style:{"font-size":"16px"}},[e.label]),P(G,{style:{"margin-top":"5px"},size:"small",type:"成功"==e.status?"success":"失败"==e.status?"error":"warning"},{default:()=>e.status})])]),Me=({option:e})=>P("div",{style:{display:"flex",alignItems:"center"}},[P("div",{style:{"font-size":"16px"}},[e.label])]);qe.value=[{value:"success",label:"成功"},{value:"error",label:"失败"},{value:"error-retry",label:"失败待重试"},{value:"retry",label:"待重试"},{value:"no-auth",label:"无权限"},{value:"no-data",label:"无响应数据"},{value:"no-some-data",label:"响应缺少部分数据"},{value:"big-some-data",label:"返回了多余数据"},{value:"no-format",label:"响应参数未驼峰命名"},{value:"type-error",label:"参数类型错误"}],Ne.value=[{label:"application/json",value:"application/json"},{label:"x-www-form-urlencoded",value:"x-www-form-urlencoded"},{label:"form-data",value:"form-data"}];let Re=()=>{const e="lucky_"+aa.value+"_"+ta.value;let a=localStorage.getItem(e);if(null!=a){JSON.parse(a).forEach((e=>{let a=qe.value.find((a=>a.value==e.status));Ie.value.push({time:K().format("YYYY-MM-DD HH:mm:ss"),label:e.title,value:e.title,params:e.param,body:e.body,status:a.label})}))}},Ve=s(""),Be=s(!1),He=()=>{Be.value=!0},Te=()=>{""==Ve.value&&a.error("请求用例标题不能为空");const e="lucky_"+aa.value+"_"+ta.value;let l=localStorage.getItem(e);if(null!=l){const t=JSON.parse(l);if(-1!=t.findIndex((e=>e.title==Ve.value)))return void a.error("该用例名称已被使用,请更改后重试");let s={};s.param=ia.value,s.time=K().format("YYYY-MM-DD HH:mm:ss"),s.body=Je.value,s.title=Ve.value,s.status=je.value,t.push(s),localStorage.setItem(e,JSON.stringify(t))}else{let a=[],l={};l.param=ia.value,l.time=K().format("YYYY-MM-DD HH:mm:ss"),l.body=Je.value,l.title=Ve.value,l.status=je.value,a.push(l),localStorage.setItem(e,JSON.stringify(a))}a.success("保存成功"),Be.value=!1,Re()},Le=s({});Le.value=ze.value.theme;let Ee=ze.value.data;const Pe="这似乎不是一个JSON吧 朋友？";let Ge=()=>{try{Je.value=JSON.stringify(JSON.parse(Je.value),null,2)}catch(e){a.warning(Pe)}},Ke=()=>{try{Je.value=JSON.stringify(JSON.parse(Je.value),null,0)}catch(e){a.warning(Pe)}},Ae=()=>{try{Ye.value=JSON.stringify(JSON.parse(Ye.value),null,2)}catch(e){}},Fe=()=>{try{Ye.value=JSON.stringify(JSON.parse(Ye.value),null,0)}catch(e){}},Qe=()=>{ka.value<=12?a.warning("不能再缩小了"):ka.value=ka.value-1},We=()=>{ka.value>=20?a.warning("不能再放大了"):ka.value=ka.value+1},Xe=u();n((()=>ze.value.theme),(()=>{setTimeout((()=>{Oe.vlaue=!1,Le.value=ze.value.theme,Oe.vlaue=!0}),160)}));let Ze=s("doc"),ea=e=>{Ze.value=e},aa=s(""),la=s(""),ta=s(""),sa=s(""),ua=s(""),na=s("Params"),ia=s([]),ra=s(null),oa=s([]),da=e=>e.name,va=(e,a)=>-1!=e.name.search("id")||-1!=e.name.search("Id")?"too-old":null,pa=[{title:"字段名",key:"name"},{title:"类型",key:"type",render:e=>""==e.type||null==e.type||null==e.type?"":P(G,{style:{marginRight:"6px"},round:!0,type:"warning"},{default:()=>e.type})},{title:"描述",key:"description"},{title:"快速复制字段名",key:"actions",render:e=>P(J,{size:"small",round:!0,type:"success",quaternary:!0,onClick:()=>ma(e)},{default:()=>"Copy"})}],ma=e=>{const l=document.createElement("input");l.value=e.name,document.body.appendChild(l),l.select(),document.execCommand("Copy"),document.body.removeChild(l),a.success("已复制")},ca=(e,a,l)=>{if("$ref"in e||"items"in e&&"$ref"in e.items){let t="";t="$ref"in e?e.$ref.replace("#/definitions/",""):e.items.$ref.replace("#/definitions/","");let s=Ee.definitions[t];if(null==s)return{};let u=s.properties,n={},i=Object.keys(u);if(null!=l){let t=[],s={name:a,type:e.type,description:e.description,children:t};for(let e in i)n[i[e]]=ca(u[i[e]],i[e],t);l.push(s)}else for(let e in i)n[i[e]]=ca(u[i[e]],i[e],void 0);return n}{let t=ya(e.type);return null!=l&&l.push({name:a,type:e.type,description:e.description}),t}},fa=e=>{na.value=e},ya=e=>{switch(e.toLowerCase()){case"array":return[];case"integer":case"number":return 0;case"string":return"";case"object":return{};case"string(date-time)":return K().format("YYYY-MM-DD HH:mm:ss");default:return""}},ga=()=>{let e={"Content-Type":De.value},a={};if(ia.value.forEach((l=>{l.active&&("header"==l.in?e[l.name]=l.value:"query"==l.in&&(a[l.name]=l.value))})),"get"==ta.value.toLowerCase()){Q({url:la.value,method:ta.value.toLowerCase(),data:a,config:{headers:e}}).then((e=>{ua.value=new Date-e.config.startTime,sa.value=e.status,Ye.value=JSON.stringify(e.data),Ae()})).catch((e=>{sa.value=e.response.status,ua.value=new Date-e.response.config.startTime,Ye.value=ba(e.response),Ae()}))}else{Q({url:la.value,method:ta.value.toLowerCase(),data:Je.value,config:{headers:e,params:a}}).then((e=>{Ye.value=JSON.stringify(e.data),sa.value=e.status,ua.value=new Date-e.config.startTime,Ae()})).catch((e=>{sa.value=e.response.status,ua.value=new Date-e.response.config.startTime,Ye.value=ba(e.response),Ae()}))}na.value="ResponseBody"},ha=(e,l)=>{ia.value=l.params,Je.value=l.body,a.success("参数已经覆盖")},ba=e=>{let a={};return a.timestamp=K().format("YYYY-MM-DD HH:mm:ss"),a.code=e.data.status,a.error=e.data.error,a.path=e.data.path,JSON.stringify(a)},_a=!1,ka=s(12),xa=s(""),Ca=s([]);return n((()=>Xe.params),(()=>{const e=Xe.params.data;if(Ie.value=[],sessionStorage.removeItem(aa.value+ta.value.toLowerCase()),""!=aa.value&&"/firstPage"!=Xe.path){let e={};e.editJson=Je.value,e.reqBody=ra.value,e.reqParams=ia.value,e.isBody=Se.value,e.tabValue=Ze.value,e.responseJson=Ye.value,e.rescode=sa.value,e.restime=ua.value,e.openSelect=Ue.value,e.switchResponse=na.value,e.radio=De.value,e.responseTreeData=Ca.value,sessionStorage.setItem(la.value+ta.value.toLowerCase(),JSON.stringify(e))}if(null!=e&&"identity"!=e){const a=JSON.parse(e);aa.value=a.summary,la.value=a.url,ta.value=a.method.toUpperCase(),Ca.value=[];let l=sessionStorage.getItem(a.url+a.method);if(null!=l){let e=JSON.parse(l);return Je.value=e.editJson,ra.value=e.reqBody,ia.value=e.reqParams,Se.value=e.isBody,Ze.value=e.tabValue,Ye.value=e.responseJson,sa.value=e.rescode,ua.value=e.restime,Ue.value=e.openSelect,na.value=e.switchResponse,De.value=e.radio,void(Ca.value=e.responseTreeData)}ia.value=[];for(let e in a.parameters)"body"!=a.parameters[e].in?(a.parameters[e].active=!0,a.parameters[e].value=s(""),ia.value.push(a.parameters[e])):ra.vlaue=a.parameters[e];if("GET"==ta.value)Se.value=!1;else{Se.value=!0;let e=ra.vlaue.schema.$ref,a=Ee.definitions[e.replace("#/definitions/","")],l=Object.keys(a.properties),t={};l.forEach((e=>{a.properties[e].key=e,t[e]=ca(a.properties[e],void 0,void 0)})),Je.value=JSON.stringify(t)}let t=a.responses[200].schema,u={};if(null!=t){if("items"in t&&"$ref"in t.items)u=Ee.definitions[t.items.$ref.replace("#/definitions/","")];else if("$ref"in t&&null!=t.$ref)u=Ee.definitions[t.$ref.replace("#/definitions/","")];else if("items"in t){let e={};e[""]={type:t.items.type,description:t.items.type,key:""},u.properties=e}else u=t;oa.value=u.properties;let e=Object.keys(u.properties),a={};e.forEach((e=>{u.properties[e].key=e,a[e]=ca(u.properties[e],e,Ca.value)})),xa.value=a,""!=Je.value&&Ge(),Re()}}}),{immediate:!0}),(e,a)=>{const l=i("b-ace-editor"),t=i("json-viewer");return r(),o(v(p),{style:{margin:"10px"},key:(new Date).getTime()},{default:d((()=>[m(v(c),{"default-value":"doc",size:"large",value:v(Ze),"on-update:value":v(ea)},{default:d((()=>[m(v(_),{name:"doc",tab:"文档"},{default:d((()=>[m(v(p),{title:"Documentation",style:{margin:"10px"}},{default:d((()=>[m(v(f),{"x-gap":50,"y-gap":10,cols:3},{default:d((()=>[m(v(y),null,{default:d((()=>[m(v(p),{title:"接口地址",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(la)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"请求方式",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(ta)),1)])),_:1})])),_:1})])),_:1}),m(v(y),null,{default:d((()=>[m(v(p),{title:"接口描述",hoverable:""},{default:d((()=>[m(v(g),{id:"titleDoc"},{default:d((()=>[h(b(v(aa)),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(v(p),{style:{margin:"10px"}},{default:d((()=>[m(v(c),{"default-value":"request"},{default:d((()=>[m(v(_),{name:"request",tab:"请求参数"},{default:d((()=>[m(v(k),{vertical:"",size:12},{default:d((()=>[m(v(p),null,{default:d((()=>[m(v(x),{"single-line":!1},{default:d((()=>[W,C("tbody",null,[(r(!0),w(S,null,z(v(ia),(e=>(r(),w("tr",null,[C("td",null,b(e.name),1),C("td",null,b(e.description),1),"header"==e.in?(r(),w("td",X,[m(v(G),{type:"success",size:"medium",round:""},{default:d((()=>[h(b(e.in),1)])),_:2},1024)])):(r(),w("td",Z,[m(v(G),{type:"info",size:"medium",round:""},{default:d((()=>[h(b(e.in),1)])),_:2},1024)])),e.required?(r(),w("td",ee,[m(v(G),{type:"error",size:"medium",round:""},{default:d((()=>[h(b(e.required),1)])),_:2},1024)])):(r(),w("td",ae,[m(v(G),{type:"info",size:"medium",round:""},{default:d((()=>[h(b(e.required),1)])),_:2},1024)])),C("td",null,b(e.type),1)])))),256))])])),_:1})])),_:1}),v(Se)&&v(Oe)?(r(),o(v(p),{key:0,title:"RequestBody"},{default:d((()=>[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Ge),size:"small"},{default:d((()=>[le])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ke),size:"small"},{default:d((()=>[te])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[se])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(We),size:"small"},{default:d((()=>[ue])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Je),"onUpdate:modelValue":a[0]||(a[0]=e=>O(Je)?Je.value=e:Je=e),lang:"json",width:"100%",height:"600",theme:0==v(Le)?"vibrant_ink":"github",readonly:v(_a),"font-size":v(ka)},null,8,["modelValue","theme","readonly","font-size"])])),_:1})):D("",!0)])),_:1})])),_:1}),m(v(_),{name:"signup",tab:"返回值"},{default:d((()=>[m(v(N),{ref:(e,a)=>{a.table=e},columns:v(pa),data:v(Ca),"row-key":v(da),"row-class-name":v(va)},null,8,["columns","data","row-key","row-class-name"])])),_:1}),m(v(_),{name:"show",tab:"返回值示例"},{default:d((()=>[m(t,{theme:v(Y),value:v(xa),style:{"font-size":"16px"},copyable:"","expand-depth":"2"},null,8,["theme","value"])])),_:1})])),_:1})])),_:1})])),_:1}),m(v(_),{name:"run",tab:"运行"},{default:d((()=>[m(v(p),{title:"Send Request",size:"large"},{default:d((()=>[m(v(k),{vertical:"",size:22},{default:d((()=>[m(v(j),{value:v(Ue),"onUpdate:value":a[1]||(a[1]=e=>O(Ue)?Ue.value=e:Ue=e)},{checked:d((()=>[ne])),unchecked:d((()=>[ie])),_:1},8,["value"]),m(v(q),{size:"large"},{default:d((()=>[m(v(U),null,{default:d((()=>[m(v(I),{type:"success"},{default:d((()=>[h(b(v(ta)),1)])),_:1})])),_:1}),m(v($),{disabled:!0,style:{width:"50%"},value:v(la),"onUpdate:value":a[2]||(a[2]=e=>O(la)?la.value=e:la=e)},null,8,["value"]),m(v(J),{onClick:v(ga),type:"success",ghost:""},{default:d((()=>[re])),_:1},8,["onClick"]),m(v(M),{trigger:"hover"},{trigger:d((()=>[m(v(J),{round:"",style:{"font-size":"26px"},onClick:v(He)},{default:d((()=>[m(v(R),null,{default:d((()=>[m(v(V))])),_:1})])),_:1},8,["onClick"])])),default:d((()=>[oe])),_:1})])),_:1}),v(Ue)?(r(),o(v(B),{key:0,options:v(Ie),"render-label":v($e),"render-tag":v(Me),"on-update:value":v(ha),placeholder:"选择一个请求用例,覆盖当前的参数.",style:{width:"50%"}},null,8,["options","render-label","render-tag","on-update:value"])):D("",!0),m(v(H),{show:v(Be),"onUpdate:show":a[5]||(a[5]=e=>O(Be)?Be.value=e:Be=e),width:502},{default:d((()=>[m(v(T),{title:"保存请求用例",closable:""},{footer:d((()=>[m(v(J),{size:"large",onClick:v(Te)},{default:d((()=>[de])),_:1},8,["onClick"])])),default:d((()=>[m(v(k),{vertical:""},{default:d((()=>[m(v(p),{title:"起一个名字吧"},{default:d((()=>[m(v($),{size:"large",placeholder:"写点什么..",value:v(Ve),"onUpdate:value":a[3]||(a[3]=e=>O(Ve)?Ve.value=e:Ve=e)},null,8,["value"])])),_:1}),m(v(p),{title:"选一种状态吧"},{default:d((()=>[m(v(L),{value:v(je),"onUpdate:value":a[4]||(a[4]=e=>O(je)?je.value=e:je=e),name:"statusGroup",size:"large"},{default:d((()=>[(r(!0),w(S,null,z(v(qe),(e=>(r(),o(v(A),{key:e.value,value:e.value},{default:d((()=>[m(v(k),{justify:"space-around",size:"large"},{default:d((()=>[h(b(e.label),1)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),m(v(L),{value:v(De),"onUpdate:value":a[6]||(a[6]=e=>O(De)?De.value=e:De=e),name:"radiobuttongroup1"},{default:d((()=>[(r(!0),w(S,null,z(v(Ne),(e=>(r(),o(v(F),{key:e.value,value:e.value},{default:d((()=>[h(b(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"]),m(v(c),{"default-value":"Params",value:v(na),"on-update:value":v(fa)},{default:d((()=>[m(v(_),{name:"Params",tab:"Params"},{default:d((()=>[m(v(x),{bordered:!1,"single-line":!1},{default:d((()=>[ve,C("tbody",null,[(r(!0),w(S,null,z(v(ia),(e=>(r(),w("tr",null,[C("td",null,[m(v(j),{value:e.active,"onUpdate:value":a=>e.active=a},null,8,["value","onUpdate:value"])]),C("td",null,[m(v(G),{type:"success"},{default:d((()=>[h(b(e.type)+"("+b(e.in)+")",1)])),_:2},1024)]),C("td",null,[m(v(G),{type:"info"},{default:d((()=>[h(b(e.name),1)])),_:2},1024)]),C("td",null,[m(v($),{value:e.value,"onUpdate:value":a=>e.value=a,type:"text",size:"medium",placeholder:"请填写"+e.name,disabled:!e.active,round:"",clearable:""},null,8,["value","onUpdate:value","placeholder","disabled"])])])))),256))])])),_:1})])),_:1}),m(v(_),{name:"RequestBody",tab:"RequestBody"},{default:d((()=>[v(Oe)?(r(),w("div",pe,[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Ge),size:"small"},{default:d((()=>[me])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Ke),size:"small"},{default:d((()=>[ce])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[fe])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(We),size:"small"},{default:d((()=>[ye])),_:1},8,["onClick"]),m(l,{style:{"border-style":"none"},modelValue:v(Je),"onUpdate:modelValue":a[7]||(a[7]=e=>O(Je)?Je.value=e:Je=e),lang:"json",width:"100%",height:"600",theme:0==v(Le)?"vibrant_ink":"github",readonly:v(_a),"font-size":v(ka)},null,8,["modelValue","theme","readonly","font-size"])])):D("",!0)])),_:1}),m(v(_),{name:"ResponseBody",tab:"ResponseBody"},{default:d((()=>[m(v(p),{title:"Response"},{default:d((()=>[C("div",ge,[m(v(J),{type:"success",style:{"margin-bottom":"10px"},onClick:v(Ae),size:"small"},{default:d((()=>[he])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Fe),size:"small"},{default:d((()=>[be])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(Qe),size:"small"},{default:d((()=>[_e])),_:1},8,["onClick"]),m(v(J),{type:"success",style:{"margin-bottom":"10px","margin-left":"10px"},onClick:v(We),size:"small"},{default:d((()=>[ke])),_:1},8,["onClick"]),""!=v(sa)?(r(),w("span",xe,[C("span",Ce,"状态码: "+b(v(sa)),1),m(v(E),{vertical:""}),C("span",we,"耗时: "+b(v(ua))+"ms ",1)])):D("",!0)]),m(l,{style:{"border-style":"none"},modelValue:v(Ye),"onUpdate:modelValue":a[8]||(a[8]=e=>O(Ye)?Ye.value=e:Ye=e),lang:"json",width:"100%",height:"600",theme:0==v(Le)?"vibrant_ink":"github",readonly:v(_a),"font-size":v(ka)},null,8,["modelValue","theme","readonly","font-size"])])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})])),_:1})])),_:1})])),_:1},8,["value","on-update:value"])])),_:1})}},__scopeId:"data-v-2346bda6"};export{ze as default};
